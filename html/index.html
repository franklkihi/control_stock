<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Protecciones.rx ‚Äî Demo</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --vino:        #6a040f;
      --vino-oscuro: #370617;
      --vino-claro:  #9d0208;
      --fondo:       #f0f2f5;
      --blanco:      #ffffff;
      --texto:       #1a1a2e;
      --muted:       #6c757d;
      --borde:       #e0e0e0;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: var(--fondo); color: var(--texto); }

    /* ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ */
    .page { display: none; min-height: 100vh; }
    .page.active { display: flex; flex-direction: column; }

    /* ‚îÄ‚îÄ HOME ‚îÄ‚îÄ */
    #page-home {
      background: linear-gradient(135deg, var(--vino-oscuro) 0%, var(--vino) 65%, var(--vino-claro) 100%);
      align-items: center; justify-content: center; text-align: center;
      position: relative; overflow: hidden;
    }
    #page-home .c1 { position:absolute; top:-120px; right:-100px; width:450px; height:450px; border-radius:50%; background:rgba(255,255,255,.05); }
    #page-home .c2 { position:absolute; bottom:-140px; left:-80px; width:500px; height:500px; border-radius:50%; background:rgba(255,255,255,.04); }
    .welcome-box { z-index:10; color:white; padding:40px 24px; animation:fadeUp .8s ease; }
    @keyframes fadeUp { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)} }
    .welcome-box .wi { font-size:5rem; display:block; margin-bottom:16px; }
    .welcome-box h1 { font-size:2.8rem; font-weight:800; margin-bottom:8px; }
    .welcome-box p  { font-size:1rem; opacity:.75; margin-bottom:44px; }
    .feat-cards { display:flex; gap:14px; justify-content:center; margin-bottom:40px; flex-wrap:wrap; }
    .feat-card {
      background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.15);
      border-radius:14px; padding:18px 20px; width:135px; transition:.2s;
    }
    .feat-card:hover { background:rgba(255,255,255,.18); transform:translateY(-4px); }
    .feat-card .fi { font-size:1.8rem; display:block; margin-bottom:8px; }
    .feat-card .ft { font-size:.85rem; font-weight:600; color:white; }
    .feat-card .fd { font-size:.68rem; opacity:.6; color:white; margin-top:2px; }
    .welcome-btns { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    .btn-home {
      padding:13px 32px; border-radius:12px; font-size:.95rem; font-weight:600;
      cursor:pointer; border:none; font-family:inherit; transition:all .22s;
    }
    .btn-home-p { background:white; color:var(--vino); box-shadow:0 8px 28px rgba(0,0,0,.25); }
    .btn-home-p:hover { transform:translateY(-2px); }
    .btn-home-o { background:transparent; color:white; border:2px solid rgba(255,255,255,.5); }
    .btn-home-o:hover { background:rgba(255,255,255,.1); border-color:white; }
    .wfooter { position:absolute; bottom:18px; color:rgba(255,255,255,.3); font-size:.75rem; z-index:10; }

    /* ‚îÄ‚îÄ LOGIN / REGISTER ‚îÄ‚îÄ */
    #page-login, #page-register {
      background: linear-gradient(135deg, var(--vino-oscuro) 0%, var(--vino) 60%, var(--vino-claro) 100%);
      align-items:center; justify-content:center;
    }
    .login-box {
      background:white; border-radius:20px; padding:40px 36px;
      width:100%; max-width:400px; box-shadow:0 20px 60px rgba(0,0,0,.25);
      animation:fadeUp .6s ease;
    }
    .login-box .logo { text-align:center; margin-bottom:28px; }
    .login-box .logo h2 { font-size:1.5rem; font-weight:700; color:var(--vino); }
    .login-box .logo p { color:var(--muted); font-size:.85rem; }
    .form-group { margin-bottom:14px; }
    .form-group label { display:block; font-size:.8rem; font-weight:600; color:var(--vino-oscuro); margin-bottom:5px; }
    .form-group input {
      width:100%; border:1.5px solid var(--borde); border-radius:10px;
      padding:10px 14px; font-size:.9rem; font-family:inherit; background:#fafafa;
    }
    .form-group input:focus { outline:none; border-color:var(--vino-claro); box-shadow:0 0 0 3px rgba(157,2,8,.1); }
    .btn-login {
      width:100%; background:linear-gradient(135deg,var(--vino),var(--vino-claro));
      color:white; border:none; border-radius:12px; padding:13px;
      font-family:inherit; font-size:.95rem; font-weight:700; cursor:pointer;
      margin-top:6px; transition:.2s; box-shadow:0 4px 12px rgba(106,4,15,.3);
    }
    .btn-login:hover { transform:translateY(-2px); }
    .login-footer { text-align:center; margin-top:18px; font-size:.82rem; color:var(--muted); }
    .login-footer a { color:var(--vino); font-weight:600; cursor:pointer; text-decoration:none; }
    .alert { padding:10px 14px; border-radius:8px; font-size:.84rem; margin-bottom:14px; }
    .alert-error { background:#fff0f0; color:#c62828; border-left:3px solid #c62828; }
    .alert-success { background:#f0fff4; color:#2d6a4f; border-left:3px solid #2d6a4f; }

    /* ‚îÄ‚îÄ DASHBOARD LAYOUT ‚îÄ‚îÄ */
    #page-dashboard, #page-productos, #page-usuarios {
      flex-direction: row;
      min-height: 100vh;
    }

    /* SIDEBAR desktop */
    .sidebar {
      position: fixed; top:0; left:0; width:240px; height:100vh;
      background: linear-gradient(180deg, var(--vino-oscuro) 0%, var(--vino) 100%);
      color:white; display:flex; flex-direction:column; z-index:100;
      box-shadow:4px 0 20px rgba(0,0,0,.2);
    }
    .sidebar-brand { padding:28px 24px 20px; border-bottom:1px solid rgba(255,255,255,.1); }
    .sidebar-brand h4 { font-size:1.05rem; font-weight:700; }
    .sidebar-brand small { font-size:.7rem; opacity:.6; }
    .sidebar-user { padding:14px 24px; background:rgba(255,255,255,.06); font-size:.8rem; border-bottom:1px solid rgba(255,255,255,.08); }
    .sidebar-user span { opacity:.7; }
    .sidebar-user strong { display:block; font-size:.88rem; }
    nav.sidebar-nav { flex:1; padding:16px 12px; }
    .nav-link-item {
      display:flex; align-items:center; gap:10px; padding:10px 14px;
      border-radius:10px; color:rgba(255,255,255,.75); text-decoration:none;
      font-size:.86rem; font-weight:500; transition:.2s; margin-bottom:4px; cursor:pointer; border:none; background:transparent; width:100%; text-align:left;
    }
    .nav-link-item:hover, .nav-link-item.active { background:rgba(255,255,255,.15); color:white; }
    .nav-link-item .icon { font-size:1.1rem; width:22px; text-align:center; }
    .sidebar-footer { padding:16px 12px; border-top:1px solid rgba(255,255,255,.1); }
    .sidebar-footer button {
      display:flex; align-items:center; gap:10px; padding:10px 14px; border-radius:10px;
      color:rgba(255,255,255,.6); background:transparent; border:none; font-size:.84rem; cursor:pointer; width:100%; transition:.2s;
    }
    .sidebar-footer button:hover { background:rgba(220,53,69,.3); color:white; }

    /* BOTTOM NAV m√≥vil */
    .bottom-nav { display:none; }

    /* MAIN */
    .main-content { margin-left:240px; padding:32px; flex:1; }
    .topbar { margin-bottom:28px; display:flex; justify-content:space-between; align-items:flex-start; }
    .topbar h1 { font-size:1.5rem; font-weight:700; color:var(--vino-oscuro); }
    .topbar p { color:var(--muted); font-size:.86rem; margin-top:2px; }

    /* STATS */
    .stats-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-bottom:28px; }
    .stat-card { background:white; border-radius:14px; padding:20px; box-shadow:0 2px 12px rgba(0,0,0,.06); text-align:center; }
    .stat-card .sv { font-size:2rem; font-weight:700; color:var(--vino); }
    .stat-card .sl { font-size:.7rem; text-transform:uppercase; letter-spacing:.6px; color:var(--muted); margin-top:4px; }

    /* CARD */
    .card { background:white; border-radius:16px; padding:28px; box-shadow:0 2px 12px rgba(0,0,0,.06); margin-bottom:24px; }
    .card-title { font-size:1rem; font-weight:600; color:var(--vino-oscuro); margin-bottom:18px; }

    /* TABLE */
    .table-wrap { overflow-x:auto; }
    table { width:100%; border-collapse:separate; border-spacing:0; }
    thead th { background:var(--vino-oscuro); color:white; font-size:.73rem; text-transform:uppercase; letter-spacing:.6px; padding:12px 16px; font-weight:500; }
    thead th:first-child { border-radius:10px 0 0 0; }
    thead th:last-child  { border-radius:0 10px 0 0; }
    tbody tr:hover { background:#fdf2f2; }
    tbody td { padding:12px 16px; border-bottom:1px solid #f0f0f0; font-size:.86rem; vertical-align:middle; }

    /* BADGES */
    .badge { display:inline-block; padding:4px 12px; border-radius:20px; font-size:.76rem; font-weight:600; }
    .badge-qty   { background:#fff0f0; color:var(--vino); }
    .badge-price { background:#f0fff4; color:#2d6a4f; }
    .badge-sku   { background:#f0f4ff; color:#1d3557; font-family:monospace; }
    .avatar { width:38px; height:38px; border-radius:10px; background:linear-gradient(135deg,var(--vino-oscuro),var(--vino-claro)); color:white; display:flex; align-items:center; justify-content:center; font-weight:700; }

    /* BUTTONS */
    .btn { display:inline-flex; align-items:center; gap:6px; padding:9px 18px; border-radius:10px; font-size:.86rem; font-weight:600; cursor:pointer; border:none; transition:all .2s; text-decoration:none; font-family:inherit; }
    .btn-primary { background:linear-gradient(135deg,var(--vino),var(--vino-claro)); color:white; box-shadow:0 4px 12px rgba(106,4,15,.3); }
    .btn-primary:hover { transform:translateY(-2px); color:white; }
    .btn-outline { background:transparent; border:1.5px solid var(--borde); color:var(--texto); }
    .btn-danger-outline { background:transparent; border:1.5px solid #dc3545; color:#dc3545; padding:5px 12px; font-size:.78rem; }
    .btn-danger-outline:hover { background:#dc3545; color:white; }
    .btn-edit { background:transparent; border:1.5px solid var(--vino); color:var(--vino); padding:5px 12px; font-size:.78rem; }
    .btn-edit:hover { background:var(--vino); color:white; }
    .btn-sm { padding:6px 14px; font-size:.78rem; }

    /* FORM */
    .form-group2 { margin-bottom:16px; }
    .form-group2 label { display:block; font-size:.8rem; font-weight:600; color:var(--vino-oscuro); margin-bottom:5px; }
    .form-group2 input, .form-group2 textarea {
      width:100%; border:1.5px solid var(--borde); border-radius:10px;
      padding:10px 14px; font-size:.9rem; font-family:inherit; background:#fafafa;
    }
    .form-group2 input:focus, .form-group2 textarea:focus { outline:none; border-color:var(--vino-claro); }
    .form-row2 { display:grid; grid-template-columns:1fr 1fr; gap:16px; }

    /* DEMO BANNER */
    .demo-banner {
      background: linear-gradient(135deg, #e85d04, #f48c06);
      color:white; text-align:center; padding:10px;
      font-size:.82rem; font-weight:600; position:sticky; top:0; z-index:500;
    }

    /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
    @media (max-width: 768px) {
      .sidebar { display:none; }
      .bottom-nav {
        display:flex; position:fixed; bottom:0; left:0; right:0;
        background:white; border-top:1px solid #f0f0f0;
        box-shadow:0 -4px 20px rgba(0,0,0,.08); z-index:200; padding:8px 0 20px;
      }
      .bottom-nav button {
        flex:1; display:flex; flex-direction:column; align-items:center; gap:3px;
        background:transparent; border:none; font-family:inherit;
        font-size:.58rem; font-weight:600; color:#aaa; cursor:pointer;
      }
      .bottom-nav button.active { color:var(--vino); }
      .bottom-nav button .bni { font-size:1.3rem; }
      .main-content { margin-left:0; padding:16px 16px 90px; }
      .stats-grid { grid-template-columns:repeat(3,1fr); gap:8px; }
      .stat-card { padding:14px 8px; }
      .stat-card .sv { font-size:1.4rem; }
      .card { padding:16px; }
      .topbar { flex-direction:column; gap:10px; }
      .topbar .btn { width:100%; justify-content:center; }
      .form-row2 { grid-template-columns:1fr; }
      .welcome-box h1 { font-size:2rem; }
      .login-box { padding:32px 24px; margin:16px; }
    }
  </style>
</head>
<body>

<div class="demo-banner">
  üé® DEMO ‚Äî Protecciones.rx | Esta es una vista previa est√°tica para GitHub Pages
</div>

<!-- ‚ïê‚ïê PAGE: HOME ‚ïê‚ïê -->
<div class="page active" id="page-home">
  <div class="c1"></div><div class="c2"></div>
  <div class="welcome-box">
    <span class="wi">üõ°Ô∏è</span>
    <h1>Protecciones.rx</h1>
    <p>Sistema de Control de Inventario y Stock</p>
    <div class="feat-cards">
      <div class="feat-card"><span class="fi">üì¶</span><div class="ft">Productos</div><div class="fd">Control total</div></div>
      <div class="feat-card"><span class="fi">üìä</span><div class="ft">Dashboard</div><div class="fd">Estad√≠sticas</div></div>
      <div class="feat-card"><span class="fi">üë•</span><div class="ft">Usuarios</div><div class="fd">Gesti√≥n</div></div>
    </div>
    <div class="welcome-btns">
      <button class="btn-home btn-home-p" onclick="showPage('login')">üîê Iniciar Sesi√≥n</button>
      <button class="btn-home btn-home-o" onclick="showPage('register')">‚úèÔ∏è Registrarse</button>
    </div>
  </div>
  <div class="wfooter">¬© 2026 Protecciones.rx</div>
</div>

<!-- ‚ïê‚ïê PAGE: LOGIN ‚ïê‚ïê -->
<div class="page" id="page-login">
  <div class="login-box">
    <div class="logo"><h2>üõ°Ô∏è Protecciones.rx</h2><p>Control de Stock</p></div>
    <div id="login-error"></div>
    <div class="form-group">
      <label>Usuario</label>
      <input type="text" id="login-user" placeholder="Escribe: admin" value=""/>
    </div>
    <div class="form-group">
      <label>Contrase√±a</label>
      <input type="password" id="login-pass" placeholder="Escribe: 1234" value=""/>
    </div>
    <button class="btn-login" onclick="doLogin()">Ingresar</button>
    <div class="login-footer">¬øNo tienes cuenta? <a onclick="showPage('register')">Reg√≠strate aqu√≠</a></div>
    <div class="login-footer" style="margin-top:8px"><a onclick="showPage('home')">‚Üê Volver al inicio</a></div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE: REGISTER ‚ïê‚ïê -->
<div class="page" id="page-register">
  <div class="login-box">
    <div class="logo"><h2>üõ°Ô∏è Protecciones.rx</h2><p>Crear nueva cuenta</p></div>
    <div id="reg-msg"></div>
    <div class="form-group">
      <label>Usuario</label>
      <input type="text" id="reg-user" placeholder="Elige un nombre de usuario"/>
    </div>
    <div class="form-group">
      <label>Contrase√±a</label>
      <input type="password" id="reg-pass" placeholder="M√≠nimo 6 caracteres"/>
    </div>
    <button class="btn-login" onclick="doRegister()">Registrar</button>
    <div class="login-footer">¬øYa tienes cuenta? <a onclick="showPage('login')">Inicia sesi√≥n</a></div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE: DASHBOARD ‚ïê‚ïê -->
<div class="page" id="page-dashboard">
  <aside class="sidebar">
    <div class="sidebar-brand"><h4>üõ°Ô∏è Protecciones.rx</h4><small>Control de Stock</small></div>
    <div class="sidebar-user"><span>Bienvenido,</span><strong id="sb-user-d">admin</strong></div>
    <nav class="sidebar-nav">
      <button class="nav-link-item active" onclick="showPage('dashboard')"><span class="icon">üìä</span> Dashboard</button>
      <button class="nav-link-item" onclick="showPage('productos')"><span class="icon">üì¶</span> Productos</button>
      <button class="nav-link-item" onclick="showPage('usuarios')"><span class="icon">üë•</span> Usuarios</button>
    </nav>
    <div class="sidebar-footer"><button onclick="doLogout()"><span>üö™</span> Cerrar sesi√≥n</button></div>
  </aside>
  <nav class="bottom-nav">
    <button class="active" onclick="showPage('dashboard')"><span class="bni">üìä</span>Dashboard</button>
    <button onclick="showPage('productos')"><span class="bni">üì¶</span>Productos</button>
    <button onclick="showPage('usuarios')"><span class="bni">üë•</span>Usuarios</button>
    <button onclick="doLogout()"><span class="bni">üö™</span>Salir</button>
  </nav>
  <div class="main-content">
    <div class="topbar"><div><h1>Dashboard</h1><p>Resumen general del inventario</p></div></div>
    <div class="stats-grid">
      <div class="stat-card"><div class="sv" id="d-total">4</div><div class="sl">Productos</div></div>
      <div class="stat-card"><div class="sv" id="d-uds">65</div><div class="sl">Unidades</div></div>
      <div class="stat-card"><div class="sv" id="d-val">$2.950</div><div class="sl">Valor Total</div></div>
    </div>
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:18px">
        <span class="card-title" style="margin:0">üì¶ Productos</span>
        <button class="btn btn-primary btn-sm" onclick="showPage('productos')">+ Nuevo</button>
      </div>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Ref.</th><th>Producto</th><th>SKU</th><th>Cantidad</th><th>Precio</th></tr></thead>
          <tbody id="dash-table"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE: PRODUCTOS ‚ïê‚ïê -->
<div class="page" id="page-productos">
  <aside class="sidebar">
    <div class="sidebar-brand"><h4>üõ°Ô∏è Protecciones.rx</h4><small>Control de Stock</small></div>
    <div class="sidebar-user"><span>Bienvenido,</span><strong id="sb-user-p">admin</strong></div>
    <nav class="sidebar-nav">
      <button class="nav-link-item" onclick="showPage('dashboard')"><span class="icon">üìä</span> Dashboard</button>
      <button class="nav-link-item active" onclick="showPage('productos')"><span class="icon">üì¶</span> Productos</button>
      <button class="nav-link-item" onclick="showPage('usuarios')"><span class="icon">üë•</span> Usuarios</button>
    </nav>
    <div class="sidebar-footer"><button onclick="doLogout()"><span>üö™</span> Cerrar sesi√≥n</button></div>
  </aside>
  <nav class="bottom-nav">
    <button onclick="showPage('dashboard')"><span class="bni">üìä</span>Dashboard</button>
    <button class="active" onclick="showPage('productos')"><span class="bni">üì¶</span>Productos</button>
    <button onclick="showPage('usuarios')"><span class="bni">üë•</span>Usuarios</button>
    <button onclick="doLogout()"><span class="bni">üö™</span>Salir</button>
  </nav>
  <div class="main-content">
    <div class="topbar">
      <div><h1>Productos</h1><p>Gesti√≥n completa del inventario</p></div>
      <button class="btn btn-primary" onclick="showForm()">+ Nuevo producto</button>
    </div>
    <div id="prod-msg"></div>

    <!-- Formulario -->
    <div class="card" id="prod-form" style="display:none;max-width:600px">
      <div class="card-title" id="form-title">üì¶ Nuevo producto</div>
      <input type="hidden" id="edit-idx" value="-1"/>
      <div class="form-row2">
        <div class="form-group2"><label>Nombre *</label><input type="text" id="f-nombre" placeholder="Ej: Delantal"/></div>
        <div class="form-group2"><label>SKU *</label><input type="text" id="f-sku" placeholder="PRX-005"/></div>
      </div>
      <div class="form-row2">
        <div class="form-group2"><label>Cantidad *</label><input type="number" id="f-qty" placeholder="0" min="0"/></div>
        <div class="form-group2"><label>Precio ($) *</label><input type="number" id="f-precio" placeholder="0" min="0"/></div>
      </div>
      <div class="form-group2"><label>Descripci√≥n</label><textarea id="f-desc" rows="2" placeholder="Descripci√≥n opcional..."></textarea></div>
      <div style="display:flex;gap:10px;margin-top:8px">
        <button class="btn btn-primary" onclick="saveProduct()">Guardar</button>
        <button class="btn btn-outline" onclick="hideForm()">Cancelar</button>
      </div>
    </div>

    <div class="stats-grid" style="grid-template-columns:repeat(3,1fr)">
      <div class="stat-card"><div class="sv" id="p-total">4</div><div class="sl">Productos</div></div>
      <div class="stat-card"><div class="sv" id="p-uds">65</div><div class="sl">Unidades</div></div>
      <div class="stat-card"><div class="sv" id="p-val">$2.950</div><div class="sl">Valor Total</div></div>
    </div>

    <div class="card">
      <div class="table-wrap">
        <table>
          <thead><tr><th>Ref.</th><th>Producto</th><th>SKU</th><th>Cantidad</th><th>Precio</th><th>Descripci√≥n</th><th>Acciones</th></tr></thead>
          <tbody id="prod-table"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE: USUARIOS ‚ïê‚ïê -->
<div class="page" id="page-usuarios">
  <aside class="sidebar">
    <div class="sidebar-brand"><h4>üõ°Ô∏è Protecciones.rx</h4><small>Control de Stock</small></div>
    <div class="sidebar-user"><span>Bienvenido,</span><strong id="sb-user-u">admin</strong></div>
    <nav class="sidebar-nav">
      <button class="nav-link-item" onclick="showPage('dashboard')"><span class="icon">üìä</span> Dashboard</button>
      <button class="nav-link-item" onclick="showPage('productos')"><span class="icon">üì¶</span> Productos</button>
      <button class="nav-link-item active" onclick="showPage('usuarios')"><span class="icon">üë•</span> Usuarios</button>
    </nav>
    <div class="sidebar-footer"><button onclick="doLogout()"><span>üö™</span> Cerrar sesi√≥n</button></div>
  </aside>
  <nav class="bottom-nav">
    <button onclick="showPage('dashboard')"><span class="bni">üìä</span>Dashboard</button>
    <button onclick="showPage('productos')"><span class="bni">üì¶</span>Productos</button>
    <button class="active" onclick="showPage('usuarios')"><span class="bni">üë•</span>Usuarios</button>
    <button onclick="doLogout()"><span class="bni">üö™</span>Salir</button>
  </nav>
  <div class="main-content">
    <div class="topbar">
      <div><h1>Usuarios</h1><p>Gesti√≥n de usuarios del sistema</p></div>
      <button class="btn btn-primary" onclick="showUserForm()">+ Nuevo usuario</button>
    </div>
    <div id="user-msg"></div>
    <div class="card" id="user-form" style="display:none;max-width:440px">
      <div class="card-title">üë§ Nuevo usuario</div>
      <div class="form-group2"><label>Usuario *</label><input type="text" id="u-name" placeholder="Ej: juan123"/></div>
      <div class="form-group2"><label>Contrase√±a *</label><input type="password" id="u-pass" placeholder="M√≠nimo 6 caracteres"/></div>
      <div style="display:flex;gap:10px;margin-top:8px">
        <button class="btn btn-primary" onclick="saveUser()">Crear</button>
        <button class="btn btn-outline" onclick="hideUserForm()">Cancelar</button>
      </div>
    </div>
    <div class="card">
      <div class="table-wrap">
        <table>
          <thead><tr><th>Ref.</th><th>Usuario</th><th>Estado</th><th>Acciones</th></tr></thead>
          <tbody id="user-table"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  // ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
  let currentUser = "";
  let products = [
    { nombre:"Plomo",            sku:"PRX-001", cantidad:10, precio:100, descripcion:"L√°minas de plomo para protecci√≥n" },
    { nombre:"Delantales",       sku:"PRX-002", cantidad:15, precio:50,  descripcion:"Delantales plomados para personal" },
    { nombre:"Gorras",           sku:"PRX-003", cantidad:20, precio:30,  descripcion:"Gorras de protecci√≥n" },
    { nombre:"Cuello Protector", sku:"PRX-004", cantidad:20, precio:30,  descripcion:"Protector de cuello" },
  ];
  let users = [{ username:"admin" }];

  // ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
  function showPage(p) {
    document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
    document.getElementById('page-' + p).classList.add('active');
    if (['dashboard','productos','usuarios'].includes(p)) {
      document.getElementById('sb-user-d') && (document.getElementById('sb-user-d').textContent = currentUser);
      document.getElementById('sb-user-p') && (document.getElementById('sb-user-p').textContent = currentUser);
      document.getElementById('sb-user-u') && (document.getElementById('sb-user-u').textContent = currentUser);
    }
    if (p === 'dashboard') renderDash();
    if (p === 'productos') renderProducts();
    if (p === 'usuarios')  renderUsers();
  }

  // ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ
  function doLogin() {
    const u = document.getElementById('login-user').value.trim();
    const p = document.getElementById('login-pass').value;
    const found = users.find(x => x.username === u);
    if (found && (p === '1234' || found.password === p)) {
      currentUser = u;
      document.getElementById('login-error').innerHTML = '';
      showPage('dashboard');
    } else {
      document.getElementById('login-error').innerHTML = '<div class="alert alert-error">Usuario o contrase√±a incorrectos.</div>';
    }
  }

  function doRegister() {
    const u = document.getElementById('reg-user').value.trim();
    const p = document.getElementById('reg-pass').value;
    const msg = document.getElementById('reg-msg');
    if (!u || p.length < 6) { msg.innerHTML = '<div class="alert alert-error">Completa todos los campos (m√≠nimo 6 caracteres).</div>'; return; }
    if (users.find(x => x.username === u)) { msg.innerHTML = '<div class="alert alert-error">El usuario ya existe.</div>'; return; }
    users.push({ username: u, password: p });
    msg.innerHTML = '<div class="alert alert-success">¬°Usuario registrado! Ahora inicia sesi√≥n.</div>';
    setTimeout(() => { document.getElementById('login-user').value = u; showPage('login'); }, 1500);
  }

  function doLogout() { currentUser = ""; showPage('home'); }

  // ‚îÄ‚îÄ DASHBOARD ‚îÄ‚îÄ
  function renderDash() {
    const total = products.length;
    const uds   = products.reduce((s,p) => s + p.cantidad, 0);
    const val   = products.reduce((s,p) => s + p.cantidad * p.precio, 0);
    document.getElementById('d-total').textContent = total;
    document.getElementById('d-uds').textContent   = uds;
    document.getElementById('d-val').textContent   = '$' + val.toLocaleString();
    const tbody = document.getElementById('dash-table');
    tbody.innerHTML = products.slice(0,5).map(p => `
      <tr>
        <td><div class="avatar">${p.nombre[0].toUpperCase()}</div></td>
        <td><strong>${p.nombre}</strong></td>
        <td><span class="badge badge-sku">${p.sku}</span></td>
        <td><span class="badge badge-qty">${p.cantidad}</span></td>
        <td><span class="badge badge-price">$${p.precio}</span></td>
      </tr>`).join('');
  }

  // ‚îÄ‚îÄ PRODUCTOS ‚îÄ‚îÄ
  function renderProducts() {
    const total = products.length;
    const uds   = products.reduce((s,p) => s + p.cantidad, 0);
    const val   = products.reduce((s,p) => s + p.cantidad * p.precio, 0);
    document.getElementById('p-total').textContent = total;
    document.getElementById('p-uds').textContent   = uds;
    document.getElementById('p-val').textContent   = '$' + val.toLocaleString();
    const tbody = document.getElementById('prod-table');
    tbody.innerHTML = products.map((p,i) => `
      <tr>
        <td><div class="avatar">${p.nombre[0].toUpperCase()}</div></td>
        <td><strong>${p.nombre}</strong></td>
        <td><span class="badge badge-sku">${p.sku}</span></td>
        <td><span class="badge badge-qty">${p.cantidad}</span></td>
        <td><span class="badge badge-price">$${p.precio}</span></td>
        <td style="color:#666;font-size:.78rem">${p.descripcion||'‚Äî'}</td>
        <td style="display:flex;gap:6px">
          <button class="btn btn-edit" onclick="editProduct(${i})">Editar</button>
          <button class="btn btn-danger-outline" onclick="deleteProduct(${i})">Eliminar</button>
        </td>
      </tr>`).join('');
  }

  function showForm() {
    document.getElementById('prod-form').style.display = 'block';
    document.getElementById('form-title').textContent = 'üì¶ Nuevo producto';
    document.getElementById('edit-idx').value = -1;
    ['f-nombre','f-sku','f-qty','f-precio','f-desc'].forEach(id => document.getElementById(id).value = '');
  }

  function hideForm() { document.getElementById('prod-form').style.display = 'none'; }

  function editProduct(i) {
    const p = products[i];
    document.getElementById('prod-form').style.display = 'block';
    document.getElementById('form-title').textContent = '‚úèÔ∏è Editar producto';
    document.getElementById('edit-idx').value   = i;
    document.getElementById('f-nombre').value   = p.nombre;
    document.getElementById('f-sku').value      = p.sku;
    document.getElementById('f-qty').value      = p.cantidad;
    document.getElementById('f-precio').value   = p.precio;
    document.getElementById('f-desc').value     = p.descripcion;
  }

  function saveProduct() {
    const nombre = document.getElementById('f-nombre').value.trim();
    const sku    = document.getElementById('f-sku').value.trim();
    const qty    = parseInt(document.getElementById('f-qty').value);
    const precio = parseFloat(document.getElementById('f-precio').value);
    const desc   = document.getElementById('f-desc').value.trim();
    const idx    = parseInt(document.getElementById('edit-idx').value);
    if (!nombre || !sku || isNaN(qty) || isNaN(precio)) {
      document.getElementById('prod-msg').innerHTML = '<div class="alert alert-error">Completa todos los campos obligatorios.</div>';
      return;
    }
    if (idx === -1) {
      products.push({ nombre, sku, cantidad:qty, precio, descripcion:desc });
    } else {
      products[idx] = { nombre, sku, cantidad:qty, precio, descripcion:desc };
    }
    document.getElementById('prod-msg').innerHTML = '<div class="alert alert-success">Producto guardado correctamente.</div>';
    hideForm();
    renderProducts();
    setTimeout(() => document.getElementById('prod-msg').innerHTML = '', 3000);
  }

  function deleteProduct(i) {
    if (confirm('¬øEliminar ' + products[i].nombre + '?')) {
      products.splice(i, 1);
      renderProducts();
    }
  }

  // ‚îÄ‚îÄ USUARIOS ‚îÄ‚îÄ
  function renderUsers() {
    const tbody = document.getElementById('user-table');
    tbody.innerHTML = users.map((u,i) => `
      <tr>
        <td><div class="avatar">${u.username[0].toUpperCase()}</div></td>
        <td><strong>${u.username}</strong>${u.username===currentUser?' <span class="badge badge-sku">T√∫</span>':''}</td>
        <td><span class="badge badge-price">Activo</span></td>
        <td>${u.username!==currentUser?`<button class="btn btn-danger-outline" onclick="deleteUser(${i})">Eliminar</button>`:'‚Äî'}</td>
      </tr>`).join('');
  }

  function showUserForm()  { document.getElementById('user-form').style.display = 'block'; }
  function hideUserForm()  { document.getElementById('user-form').style.display = 'none'; }

  function saveUser() {
    const u = document.getElementById('u-name').value.trim();
    const p = document.getElementById('u-pass').value;
    const msg = document.getElementById('user-msg');
    if (!u || p.length < 6) { msg.innerHTML = '<div class="alert alert-error">Completa todos los campos.</div>'; return; }
    if (users.find(x => x.username === u)) { msg.innerHTML = '<div class="alert alert-error">El usuario ya existe.</div>'; return; }
    users.push({ username:u, password:p });
    msg.innerHTML = '<div class="alert alert-success">Usuario creado correctamente.</div>';
    hideUserForm();
    renderUsers();
    setTimeout(() => msg.innerHTML = '', 3000);
  }

  function deleteUser(i) {
    if (confirm('¬øEliminar usuario ' + users[i].username + '?')) {
      users.splice(i, 1); renderUsers();
    }
  }

  // Enter en login
  document.getElementById('login-pass').addEventListener('keydown', e => { if(e.key==='Enter') doLogin(); });
</script>
</body>
</html>
